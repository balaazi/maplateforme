{% extends 'base.html.twig' %}

{% block title %}Envoyer des Invitations{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="mb-4">Envoyer des Invitations</h1>

        {% for message in app.flashes('success') %}
            <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
        {% for message in app.flashes('error') %}
            <div class="alert alert-danger">{{ message }}</div>
        {% endfor %}

        <form method="post" action="{{ path('invitation_send', { id: event.id }) }}">
            <div class="mb-3">
                <label for="receiver" class="form-label">Sélectionner un participant :</label>
                <select name="receiver_id" id="receiver" class="form-select" required>
                    <option value="">-- Choisir un utilisateur --</option>
                    {% for user in users %}
                        <option value="{{ user.id }}">{{ user.email }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label for="message" class="form-label">Message (optionnel) :</label>
                <textarea name="message" id="message" class="form-control" rows="3"></textarea>
            </div>

            <div class="mb-3">
                <label for="mode" class="form-label">Méthode d'envoi :</label>
                <select name="mode" id="mode" class="form-select" required>
                    <option value="email">Email</option>
                    <option value="notification">Notification interne</option>
                </select>
            </div>

            <input type="hidden" name="_token" value="{{ csrf_token('invitation_send_' ~ event.id) }}">

            <button type="submit" class="btn btn-primary">Envoyer l'invitation</button>
        </form>
    </div>
{% endblock %}
